<!DOCTYPE html>
<html lang="es">
<!-- Include Head -->
<%- include('./partials/head') %>

<body>
  <!-- Header -->
  <% if (locals.user != undefined) { %>
    <%- include('./partials/headerLogueado') %>
  <% } else { %>
    <%- include('./partials/header') %>
  <% } %>
  <!-- /Header -->

  <!-- Editar Perfil -->
  <section class="info-usuario container products-wrapper">
    <div class="row">
      <div class="img-container offset-3 col-2">
        <img id="profileImage" src="<%= perfil.fotoPerfil %>" alt="foto de perfil" class="foto-perfil">
      </div>
      <div class="data-container col-6">
        <form id="profileForm" action="/users/update" method="POST">
          <input type="hidden" name="id" value="<%= perfil.id %>">
          <div class="form-group">
            <label for="nombre">Nombre</label>
            <input type="text" id="nombre" name="nombre" value="<%= perfil.nombre %>" class="form-control">
          </div>
          <div class="form-group">
            <label for="mail">Email</label>
            <input type="email" id="mail" name="mail" value="<%= perfil.mail %>" class="form-control">
          </div>
          <div class="form-group">
            <label for="contra">Nueva Contrase√±a</label>
            <input type="password" id="contra" name="contra" class="form-control">
          </div>
          <div class="form-group">
            <label for="fotoPerfil">Foto de Perfil</label>
            <input type="file" id="fotoPerfil" name="fotoPerfil" class="form-control">
            <input type="hidden" id="fotoPerfilBase64" name="fotoPerfilBase64">
          </div>
          <button type="submit" class="btn btn-primary">Guardar Cambios</button>
        </form>
      </div>
    </div>
  </section>
  <!-- /Editar Perfil -->

  <!-- footer -->
  <%- include('./partials/footer') %>
  <!-- /footer -->

  <script>
    document.getElementById('fotoPerfil').addEventListener('change', function() {
      const reader = new FileReader();
      reader.onload = function() {
        document.getElementById('fotoPerfilBase64').value = reader.result;
        document.getElementById('profileImage').src = reader.result;
      }
      reader.readAsDataURL(this.files[0]);
    });
  </script>
</body>
</html>


